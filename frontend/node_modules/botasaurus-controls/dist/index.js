"use strict";function isEmptyObject(l){return!Object.keys(l).length&&l.constructor===Object}function isNullish(l){return null==l}function isEmpty(l){return null==l||"string"==typeof l&&""===l.trim()}function isNotEmpty(l){return!isEmpty(l)}function ensureEndsWithDot(l){return l.endsWith(".")?l:l+"."}function ensureNotEndsWithDot(l){return l.endsWith(".")?l.slice(0,-1):l}function sentenceCase(l){return l?(l=(l=l.split(/([\W_\d])/).filter(l=>l).join(" ")).replace(/[\W_]/g," ").split(/\s+/).join(" ")).replace(/([A-Z])/g," $1").trim().replace(/^\w/,l=>l.toUpperCase()):""}function findLink(l){l=l.match(/http[s]?:\/\/(?:[a-zA-Z]|[0-9]|[$-_@.&+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+/);return l?l[0]:null}function getLink(a){var l;try{return"http:"===(l=new URL(a)).protocol||"https:"===l.protocol?a:findLink(a)}catch(l){return findLink(a)}}function ensureListOfStrings(l,a){if(!Array.isArray(l))throw new Error(`DefaultValue for control '${a}' must be an array of strings.`);if(l.every(l=>"string"==typeof l))return l;throw new Error(`All items in the defaultValue array for control '${a}' must be strings.`)}function isNotValidSelectOrChooseValue(a,l){return a&&!l.options.some(l=>l.value===a)}function hasOptions(l){return"select"===l||"choose"===l}function isFunc(l){return"function"==typeof l}function canTrim(l){return isNullish(l.trim)||!1!==l.trim}function convertToBool(l,a){return"boolean"==typeof l?l:!!isFunc(l)&&!!l(a)}function getDefaultLanguages(){return[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"ja",label:"Japanese"},{value:"fr",label:"French"},{value:"it",label:"Italian"},{value:"hi",label:"Hindi"},{value:"ab",label:"Abkhazian"},{value:"aa",label:"Afar"},{value:"af",label:"Afrikaans"},{value:"ak",label:"Akan"},{value:"sq",label:"Albanian"},{value:"am",label:"Amharic"},{value:"ar",label:"Arabic"},{value:"an",label:"Aragonese"},{value:"hy",label:"Armenian"},{value:"as",label:"Assamese"},{value:"av",label:"Avar"},{value:"ay",label:"Aymara"},{value:"az",label:"Azerbaijani"},{value:"bm",label:"Bambara"},{value:"ba",label:"Bashkir"},{value:"eu",label:"Basque"},{value:"be",label:"Belarusian"},{value:"bn",label:"Bengali"},{value:"bh",label:"Bihari"},{value:"bi",label:"Bislama"},{value:"bs",label:"Bosnian"},{value:"br",label:"Breton"},{value:"bg",label:"Bulgarian"},{value:"my",label:"Burmese"},{value:"km",label:"Cambodian"},{value:"ca",label:"Catalan"},{value:"ch",label:"Chamorro"},{value:"ce",label:"Chechen"},{value:"ny",label:"Chichewa"},{value:"zh",label:"Chinese"},{value:"zh-SG",label:"Chinese (Singapore)"},{value:"zh-TW",label:"Chinese (Taiwan)"},{value:"cv",label:"Chuvash"},{value:"kw",label:"Cornish"},{value:"co",label:"Corsican"},{value:"cr",label:"Cree"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"dv",label:"Divehi"},{value:"nl",label:"Dutch"},{value:"dz",label:"Dzongkha"},{value:"eo",label:"Esperanto"},{value:"et",label:"Estonian"},{value:"ee",label:"Ewe"},{value:"fo",label:"Faroese"},{value:"fj",label:"Fijian"},{value:"fi",label:"Finnish"},{value:"gl",label:"Galician"},{value:"lg",label:"Ganda"},{value:"ka",label:"Georgian"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"kl",label:"Greenlandic"},{value:"gn",label:"Guarani"},{value:"gu",label:"Gujarati"},{value:"ht",label:"Haitian"},{value:"ha",label:"Hausa"},{value:"he",label:"Hebrew"},{value:"hz",label:"Herero"},{value:"ho",label:"Hiri Motu"},{value:"hu",label:"Hungarian"},{value:"is",label:"Icelandic"},{value:"io",label:"Ido"},{value:"ig",label:"Igbo"},{value:"id",label:"Indonesian"},{value:"ia",label:"Interlingua"},{value:"ie",label:"Interlingue"},{value:"iu",label:"Inuktitut"},{value:"ik",label:"Inupiak"},{value:"ga",label:"Irish"},{value:"jv",label:"Javanese"},{value:"kn",label:"Kannada"},{value:"kr",label:"Kanuri"},{value:"ks",label:"Kashmiri"},{value:"kk",label:"Kazakh"},{value:"ki",label:"Kikuyu"},{value:"rn",label:"Kirundi"},{value:"kv",label:"Komi"},{value:"kg",label:"Kongo"},{value:"ko",label:"Korean"},{value:"kj",label:"Kuanyama"},{value:"ku",label:"Kurdish"},{value:"ky",label:"Kyrgyz"},{value:"lo",label:"Laotian"},{value:"la",label:"Latin"},{value:"lv",label:"Latvian"},{value:"li",label:"Limburgian"},{value:"ln",label:"Lingala"},{value:"lt",label:"Lithuanian"},{value:"lu",label:"Luba Katanga"},{value:"lb",label:"Luxembourgish"},{value:"mk",label:"Macedonian"},{value:"mg",label:"Malagasy"},{value:"ms",label:"Malay"},{value:"ml",label:"Malayalam"},{value:"mt",label:"Maltese"},{value:"gv",label:"Manx"},{value:"mi",label:"Maori"},{value:"mr",label:"Marathi"},{value:"mh",label:"Marshallese"},{value:"mo",label:"Moldovan"},{value:"mn",label:"Mongolian"},{value:"na",label:"Nauruan"},{value:"nv",label:"Navajo"},{value:"ng",label:"Ndonga"},{value:"ne",label:"Nepali"},{value:"se",label:"Northern Sami"},{value:"nd",label:"North Ndebele"},{value:"no",label:"Norwegian"},{value:"nb",label:"Norwegian Bokmål"},{value:"nn",label:"Norwegian Nynorsk"},{value:"oc",label:"Occitan"},{value:"oj",label:"Ojibwa"},{value:"cu",label:"Old Church Slavonic"},{value:"or",label:"Oriya"},{value:"om",label:"Oromo"},{value:"os",label:"Ossetic"},{value:"pi",label:"Pali"},{value:"ps",label:"Pashto"},{value:"fa",label:"Persian"},{value:"ff",label:"Peul"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese"},{value:"pa",label:"Punjabi"},{value:"qu",label:"Quechua"},{value:"rm",label:"Raeto Romance"},{value:"ro",label:"Romanian"},{value:"ru",label:"Russian"},{value:"rw",label:"Rwandi"},{value:"sm",label:"Samoan"},{value:"sg",label:"Sango"},{value:"sa",label:"Sanskrit"},{value:"sc",label:"Sardinian"},{value:"gd",label:"Scottish Gaelic"},{value:"sr",label:"Serbian"},{value:"sh",label:"Serbo Croatian"},{value:"sn",label:"Shona"},{value:"ii",label:"Sichuan Yi"},{value:"sd",label:"Sindhi"},{value:"si",label:"Sinhalese"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"so",label:"Somalia"},{value:"st",label:"Southern Sotho"},{value:"nr",label:"South Ndebele"},{value:"su",label:"Sundanese"},{value:"sw",label:"Swahili"},{value:"ss",label:"Swati"},{value:"sv",label:"Swedish"},{value:"tl",label:"Tagalog"},{value:"ty",label:"Tahitian"},{value:"tg",label:"Tajik"},{value:"ta",label:"Tamil"},{value:"tt",label:"Tatar"},{value:"te",label:"Telugu"},{value:"th",label:"Thai"},{value:"bo",label:"Tibetan"},{value:"ti",label:"Tigrinya"},{value:"to",label:"Tonga"},{value:"ts",label:"Tsonga"},{value:"tn",label:"Tswana"},{value:"tr",label:"Turkish"},{value:"tk",label:"Turkmen"},{value:"tw",label:"Twi"},{value:"uk",label:"Ukrainian"},{value:"ur",label:"Urdu"},{value:"ug",label:"Uyghur"},{value:"uz",label:"Uzbek"},{value:"ve",label:"Venda"},{value:"vi",label:"Vietnamese"},{value:"vo",label:"Volapük"},{value:"wa",label:"Walloon"},{value:"cy",label:"Welsh"},{value:"fy",label:"West Frisian"},{value:"wo",label:"Wolof"},{value:"xh",label:"Xhosa"},{value:"yi",label:"Yiddish"},{value:"yo",label:"Yoruba"},{value:"za",label:"Zhuang"},{value:"zu",label:"Zulu"}]}function getDefaultCountries(){return[{value:"AF",label:"Afghanistan"},{value:"AX",label:"Aland Islands"},{value:"AL",label:"Albania"},{value:"DZ",label:"Algeria"},{value:"AS",label:"American Samoa"},{value:"AD",label:"Andorra"},{value:"AO",label:"Angola"},{value:"AI",label:"Anguilla"},{value:"AQ",label:"Antarctica"},{value:"AG",label:"Antigua And Barbuda"},{value:"AR",label:"Argentina"},{value:"AM",label:"Armenia"},{value:"AW",label:"Aruba"},{value:"AU",label:"Australia"},{value:"AT",label:"Austria"},{value:"AZ",label:"Azerbaijan"},{value:"BS",label:"Bahamas"},{value:"BH",label:"Bahrain"},{value:"BD",label:"Bangladesh"},{value:"BB",label:"Barbados"},{value:"BY",label:"Belarus"},{value:"BE",label:"Belgium"},{value:"BZ",label:"Belize"},{value:"BJ",label:"Benin"},{value:"BM",label:"Bermuda"},{value:"BT",label:"Bhutan"},{value:"BO",label:"Bolivia"},{value:"BQ",label:"Bonaire Saint Eustatius And Saba"},{value:"BA",label:"Bosnia And Herzegovina"},{value:"BW",label:"Botswana"},{value:"BV",label:"Bouvet Island"},{value:"BR",label:"Brazil"},{value:"IO",label:"British Indian Ocean Territory"},{value:"VG",label:"British Virgin Islands"},{value:"BN",label:"Brunei"},{value:"BG",label:"Bulgaria"},{value:"BF",label:"Burkina Faso"},{value:"BI",label:"Burundi"},{value:"CV",label:"Cabo Verde"},{value:"KH",label:"Cambodia"},{value:"CM",label:"Cameroon"},{value:"CA",label:"Canada"},{value:"KY",label:"Cayman Islands"},{value:"CF",label:"Central African Republic"},{value:"TD",label:"Chad"},{value:"CL",label:"Chile"},{value:"CN",label:"China"},{value:"CX",label:"Christmas Island"},{value:"CC",label:"Cocos Islands"},{value:"CO",label:"Colombia"},{value:"KM",label:"Comoros"},{value:"CK",label:"Cook Islands"},{value:"CR",label:"Costa Rica"},{value:"HR",label:"Croatia"},{value:"CU",label:"Cuba"},{value:"CW",label:"Curacao"},{value:"CY",label:"Cyprus"},{value:"CZ",label:"Czechia"},{value:"CD",label:"Democratic Republic Of The Congo"},{value:"DK",label:"Denmark"},{value:"DJ",label:"Djibouti"},{value:"DM",label:"Dominica"},{value:"DO",label:"Dominican Republic"},{value:"EC",label:"Ecuador"},{value:"EG",label:"Egypt"},{value:"SV",label:"El Salvador"},{value:"GQ",label:"Equatorial Guinea"},{value:"ER",label:"Eritrea"},{value:"EE",label:"Estonia"},{value:"SZ",label:"Eswatini"},{value:"ET",label:"Ethiopia"},{value:"FK",label:"Falkland Islands"},{value:"FO",label:"Faroe Islands"},{value:"FJ",label:"Fiji"},{value:"FI",label:"Finland"},{value:"FR",label:"France"},{value:"GF",label:"French Guiana"},{value:"PF",label:"French Polynesia"},{value:"TF",label:"French Southern Territories"},{value:"GA",label:"Gabon"},{value:"GM",label:"Gambia"},{value:"GE",label:"Georgia"},{value:"DE",label:"Germany"},{value:"GH",label:"Ghana"},{value:"GI",label:"Gibraltar"},{value:"GR",label:"Greece"},{value:"GL",label:"Greenland"},{value:"GD",label:"Grenada"},{value:"GP",label:"Guadeloupe"},{value:"GU",label:"Guam"},{value:"GT",label:"Guatemala"},{value:"GG",label:"Guernsey"},{value:"GN",label:"Guinea"},{value:"GW",label:"Guinea Bissau"},{value:"GY",label:"Guyana"},{value:"HT",label:"Haiti"},{value:"HM",label:"Heard Island And Mc Donald Islands"},{value:"HN",label:"Honduras"},{value:"HK",label:"Hong Kong"},{value:"HU",label:"Hungary"},{value:"IS",label:"Iceland"},{value:"IN",label:"India"},{value:"ID",label:"Indonesia"},{value:"IR",label:"Iran"},{value:"IQ",label:"Iraq"},{value:"IE",label:"Ireland"},{value:"IM",label:"Isle Of Man"},{value:"IL",label:"Israel"},{value:"IT",label:"Italy"},{value:"CI",label:"Ivory Coast"},{value:"JM",label:"Jamaica"},{value:"JP",label:"Japan"},{value:"JE",label:"Jersey"},{value:"JO",label:"Jordan"},{value:"KZ",label:"Kazakhstan"},{value:"KE",label:"Kenya"},{value:"KI",label:"Kiribati"},{value:"XK",label:"Kosovo"},{value:"KW",label:"Kuwait"},{value:"KG",label:"Kyrgyzstan"},{value:"LA",label:"Laos"},{value:"LV",label:"Latvia"},{value:"LB",label:"Lebanon"},{value:"LS",label:"Lesotho"},{value:"LR",label:"Liberia"},{value:"LY",label:"Libya"},{value:"LI",label:"Liechtenstein"},{value:"LT",label:"Lithuania"},{value:"LU",label:"Luxembourg"},{value:"MO",label:"Macao"},{value:"MG",label:"Madagascar"},{value:"MW",label:"Malawi"},{value:"MY",label:"Malaysia"},{value:"MV",label:"Maldives"},{value:"ML",label:"Mali"},{value:"MT",label:"Malta"},{value:"MH",label:"Marshall Islands"},{value:"MQ",label:"Martinique"},{value:"MR",label:"Mauritania"},{value:"MU",label:"Mauritius"},{value:"YT",label:"Mayotte"},{value:"MX",label:"Mexico"},{value:"FM",label:"Micronesia"},{value:"MD",label:"Moldova"},{value:"MC",label:"Monaco"},{value:"MN",label:"Mongolia"},{value:"ME",label:"Montenegro"},{value:"MS",label:"Montserrat"},{value:"MA",label:"Morocco"},{value:"MZ",label:"Mozambique"},{value:"MM",label:"Myanmar"},{value:"NA",label:"Namibia"},{value:"NR",label:"Nauru"},{value:"NP",label:"Nepal"},{value:"NL",label:"Netherlands"},{value:"AN",label:"Netherlands Antilles"},{value:"NC",label:"New Caledonia"},{value:"NZ",label:"New Zealand"},{value:"NI",label:"Nicaragua"},{value:"NE",label:"Niger"},{value:"NG",label:"Nigeria"},{value:"NU",label:"Niue"},{value:"NF",label:"Norfolk Island"},{value:"MP",label:"Northern Mariana Islands"},{value:"KP",label:"North Korea"},{value:"MK",label:"North Macedonia"},{value:"NO",label:"Norway"},{value:"OM",label:"Oman"},{value:"PK",label:"Pakistan"},{value:"PW",label:"Palau"},{value:"PS",label:"Palestinian Territory"},{value:"PA",label:"Panama"},{value:"PG",label:"Papua New Guinea"},{value:"PY",label:"Paraguay"},{value:"PE",label:"Peru"},{value:"PH",label:"Philippines"},{value:"PN",label:"Pitcairn"},{value:"PL",label:"Poland"},{value:"PT",label:"Portugal"},{value:"PR",label:"Puerto Rico"},{value:"QA",label:"Qatar"},{value:"CG",label:"Republic Of The Congo"},{value:"RE",label:"Reunion"},{value:"RO",label:"Romania"},{value:"RU",label:"Russia"},{value:"RW",label:"Rwanda"},{value:"BL",label:"Saint Barthelemy"},{value:"SH",label:"Saint Helena"},{value:"KN",label:"Saint Kitts And Nevis"},{value:"LC",label:"Saint Lucia"},{value:"MF",label:"Saint Martin"},{value:"PM",label:"Saint Pierre And Miquelon"},{value:"VC",label:"Saint Vincent And The Grenadines"},{value:"WS",label:"Samoa"},{value:"SM",label:"San Marino"},{value:"ST",label:"Sao Tome And Principe"},{value:"SA",label:"Saudi Arabia"},{value:"SN",label:"Senegal"},{value:"RS",label:"Serbia"},{value:"CS",label:"Serbia And Montenegro"},{value:"SC",label:"Seychelles"},{value:"SL",label:"Sierra Leone"},{value:"SG",label:"Singapore"},{value:"SX",label:"Sint Maarten"},{value:"SK",label:"Slovakia"},{value:"SI",label:"Slovenia"},{value:"SB",label:"Solomon Islands"},{value:"SO",label:"Somalia"},{value:"ZA",label:"South Africa"},{value:"GS",label:"South Georgia And The South Sandwich Islands"},{value:"KR",label:"South Korea"},{value:"SS",label:"South Sudan"},{value:"ES",label:"Spain"},{value:"LK",label:"Sri Lanka"},{value:"SD",label:"Sudan"},{value:"SR",label:"Suriname"},{value:"SJ",label:"Svalbard And Jan Mayen"},{value:"SE",label:"Sweden"},{value:"CH",label:"Switzerland"},{value:"SY",label:"Syria"},{value:"TW",label:"Taiwan"},{value:"TJ",label:"Tajikistan"},{value:"TZ",label:"Tanzania"},{value:"TH",label:"Thailand"},{value:"TL",label:"Timor Leste"},{value:"TG",label:"Togo"},{value:"TK",label:"Tokelau"},{value:"TO",label:"Tonga"},{value:"TT",label:"Trinidad And Tobago"},{value:"TN",label:"Tunisia"},{value:"TR",label:"Turkey"},{value:"TM",label:"Turkmenistan"},{value:"TC",label:"Turks And Caicos Islands"},{value:"TV",label:"Tuvalu"},{value:"UG",label:"Uganda"},{value:"UA",label:"Ukraine"},{value:"AE",label:"United Arab Emirates"},{value:"GB",label:"United Kingdom"},{value:"US",label:"United States"},{value:"UM",label:"United States Minor Outlying Islands"},{value:"UY",label:"Uruguay"},{value:"VI",label:"U S Virgin Islands"},{value:"UZ",label:"Uzbekistan"},{value:"VU",label:"Vanuatu"},{value:"VA",label:"Vatican"},{value:"VE",label:"Venezuela"},{value:"VN",label:"Vietnam"},{value:"WF",label:"Wallis And Futuna"},{value:"EH",label:"Western Sahara"},{value:"YE",label:"Yemen"},{value:"ZM",label:"Zambia"},{value:"ZW",label:"Zimbabwe"}]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createControls=exports.Controls=void 0;class Controls{constructor(){Object.defineProperty(this,"isSectionControl",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"controls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"allControlIds",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"defaultData",{enumerable:!0,configurable:!0,writable:!0,value:null})}add(l,a,e){if(e=e||{},isEmpty(l))throw new Error("Control ID cannot be empty");if(l=l.trim(),this.allControlIds.has(l))throw new Error(`A control with the id '${l}' already exists.`);this.allControlIds.add(l);var u=ensureNotEndsWithDot((e.label||sentenceCase(l)).trim()),e=(e.hasOwnProperty("placeholder")&&(e.placeholder="string"==typeof e.placeholder||"number"==typeof e.placeholder?e.placeholder.toString():void 0),isNullish(e.placeholder)||(e.placeholder=ensureNotEndsWithDot(e.placeholder.trim())),isNullish(e.helpText)||(e.helpText=ensureEndsWithDot(e.helpText.trim())),isNullish(e.disabledMessage)||(e.disabledMessage=ensureEndsWithDot(e.disabledMessage.trim())),this.raiseTypeValidationErrorMessage(a,e.defaultValue),"checkbox"!==a&&"switch"!==a||e.hasOwnProperty("isRequired")&&(e.isRequired=void 0),{...e,id:l,type:a,label:u});if(hasOptions(a)&&isNotValidSelectOrChooseValue(e.defaultValue,e))throw new Error(`Control with ID '${l}' does not have an option with value '${e.defaultValue}'.`);return this.controls.push(e),this}section(l,a){if(this.isSectionControl)throw new Error(`Section control '${l}' cannot be nested within another section control`);var e="section-"+l.replace(/\s+/g,"_").toLowerCase();if(this.allControlIds.has(e))throw new Error(`A section with the id '${e}' already exists.`);var u=new Controls;return u.isSectionControl=!0,u.allControlIds=this.allControlIds,a(u),u.controls.length&&this.add(e,"section",{label:l,controls:u.controls}),this}addProxySection({label:l="Proxy Configuration",isList:a=!1}={}){return this.section(l,l=>{a?l.listOfLinks("proxy",{label:"Proxies",placeholder:"http://your_proxy_address:your_proxy_port",isMetadata:!0}):l.link("proxy",{isMetadata:!0})})}text(l,a={}){return this.add(l,"text",{defaultValue:"",...a})}listOfTexts(l,a={}){var e=ensureListOfStrings(a.defaultValue||[""],l);return this.add(l,"listOfTexts",{...a,defaultValue:e}),this}number(l,a={}){return this.add(l,"number",{defaultValue:null,...a})}numberGreaterThanOrEqualToZero(l,a={}){return this.number(l,{...a,min:0})}numberGreaterThanOrEqualToOne(l,a={}){return this.number(l,{...a,min:1})}switch(l,a={}){return this.add(l,"switch",{defaultValue:!1,...a})}checkbox(l,a={}){return this.add(l,"checkbox",{defaultValue:!1,...a})}textarea(l,a={}){return this.add(l,"textarea",{defaultValue:"",...a})}link(l,a={}){return this.add(l,"link",{defaultValue:"",...a})}listOfLinks(l,a={}){var e=ensureListOfStrings(a.defaultValue||[""],l);return this.add(l,"listOfLinks",{...a,defaultValue:e}),this}choose(l,a={}){if(a.options&&a.options.length)return this.add(l,"choose",{...a,defaultValue:null!=(a=a.defaultValue)?a:null});throw new Error(`Choose control with id '${l}' requires at least one option`)}select(l,a={}){if(a.options&&a.options.length)return this.add(l,"select",{...a,defaultValue:null!=(a=a.defaultValue)?a:null});throw new Error(`Select control with id "${l}" requires at least one option`)}multiSelect(l,a={}){var e;if(!a.options||!a.options.length)throw new Error(`MultiSelect control with id "${l}" requires at least one option`);if(a.defaultValue=null!=(e=a.defaultValue)?e:[],!a.defaultValue||Array.isArray(a.defaultValue)&&a.defaultValue.every(l=>"string"==typeof l))return this.add(l,"multiSelect",{...a,defaultValue:a.defaultValue});throw new Error(`The Default Value of MultiSelect control with id "${l}" must be a list of strings. Received: `+JSON.stringify(a.defaultValue))}addLangSelect({languages:l=getDefaultLanguages(),label:a="Language",defaultValue:e}={}){return this.select("lang",{defaultValue:e,label:a,options:l})}addCountrySelect({countries:l=getDefaultCountries(),label:a="Country",defaultValue:e}={}){return this.select("country",{defaultValue:e,label:a,options:l})}getDefaultData(){return null===this.defaultData&&(this.defaultData={},this.iterateControls(l=>{this.defaultData[l.id]=void 0!==l.defaultValue?l.defaultValue:null})),this.defaultData}getBackendValidationResult(a){const e=this.getDefaultData(),u={};this.iterateControls(l=>{l=l.id;u[l]=(a.hasOwnProperty(l)?a:e)[l]});var l=this.validate(u);if(!isEmptyObject(l))return{data:{},metadata:{},errors:l};const t={},i={};return this.iterateControls(l=>{var a=l.id;let e=u[a];"text"===l.type||"textarea"===l.type?canTrim(l)&&(e=e.trim()):"listOfTexts"===l.type?(e=e.filter(isNotEmpty),canTrim(l)&&(e=e.map(l=>l.trim()))):"listOfLinks"===l.type&&(e=e.filter(isNotEmpty).map(getLink).filter(l=>null!==l).map(l=>l.trim())),l.isMetadata?i[a]=e:t[a]=e}),{data:t,metadata:i,errors:l}}validate(b){const v={};return this.iterateControls(l=>{var a=b[l.id],{validate:e,type:u,id:t,isShown:i,isDisabled:n,isRequired:r}=l;let o=[];var s=this.getTypeValidationErrorMessage(u,a),s=(s&&o.push(s),!i||!!i(b)),i=isFunc(n)&&!!n(b);if(s&&!i&&(convertToBool(r,b)&&!o.length&&(isEmpty(a)?o.push("This field is required."):"listOfTexts"===u?!a.length||a.every(isEmpty)?o.push("This field is required."):a.some(isNotEmpty)||o.push("This field must have at least 1 non empty text."):"listOfLinks"===u&&(!a.length||a.every(isEmpty)?o.push("This field is required."):a.some(l=>!!getLink(l))||o.push("This field must have at least 1 valid link. Example: https://example.com/"))),o.length||"link"!==u||!isNotEmpty(a)||getLink(a)||o.push("This field must be a valid URL. Example: https://example.com/"),o.length||"listOfLinks"!==u||(n=a.filter(isNotEmpty)).length&&n.some(l=>!getLink(l))&&o.push("Each non empty field must be a valid URL. Example: https://example.com"),!o.length&&"number"===u&&isNotEmpty(a)&&(s=l.min,i=l.max,isNotEmpty(s)&&a<s&&o.push(`This field must be greater than or equal to ${s}.`),isNotEmpty(i))&&i<a&&o.push(`This field must be less than or equal to ${i}.`),hasOptions(u)&&!o.length&&isNotValidSelectOrChooseValue(a,l)&&o.push(`"No option value named ${a} exists.`),e&&!o.length)){let l=runValidation(t,e,a,b);"string"==typeof l&&isNotEmpty(l)?(l=l.trim(),o.push(ensureEndsWithDot(l))):Array.isArray(l)&&l.forEach(l=>{"string"==typeof l&&isNotEmpty(l)&&(l=l.trim(),o.push(ensureEndsWithDot(l)))})}0<o.length&&(v[t]=o)}),v}getTypeValidationErrorMessage(l,a){switch(l){case"text":case"textarea":case"link":if("string"!=typeof a)return"This field must be of type string.";break;case"number":if("number"!=typeof a&&null!==a)return"This field must be of type number or null.";break;case"switch":case"checkbox":if("boolean"!=typeof a)return"This field must be of type boolean.";break;case"choose":case"select":if("string"!=typeof a&&null!==a)return"This field must be of type string or null.";break;case"listOfTexts":if(Array.isArray(a)&&a.every(l=>"string"==typeof l))break;return"This field must be an array of strings.";case"listOfLinks":if(Array.isArray(a)&&a.every(l=>"string"==typeof l))break;return"This field must be an array of strings."}}raiseTypeValidationErrorMessage(l,a){l=this.getTypeValidationErrorMessage(l,a);if(l)throw new Error(l)}iterateControls(a){this.controls.forEach(l=>{"section"===l.type?l.controls.forEach(a):a(l)})}}function runValidation(a,l,e,u){try{return l(e,u)}catch(l){throw new Error(`The custom validation function for ID: ${a} encountered an error. Please review the validate function of ${a}.`)}}function createControls(l){var a=new Controls;return new Function("controls",l+"\n return getInput(controls);")(a),a}exports.Controls=Controls,exports.createControls=createControls;